< [Back](PenTesting.md)
# Info gathering
This phase tries to understand and scope the targets to be engaged.
```
export IP_FILE_LIST=MyIpList.txt
```
# Observe


## Passive info gathering
The goal is to identify targets by indirect means to minimize the chance of detection. It uses publicly available information and gatherers to start to build a picture of what is available and what it can be potentially used in the engagement.

**Google Dorking**  
Many more examples can be found at [Google Hacking DB](https://www.exploit-db.com/google-hacking-database)
```
site:<domain> -site:<already ID site(s)>
site:<site> filetype:ppt
site:<site> intitle:"VNC viewer for Java"
site:<site> inurl:"control/userimage.html"
```
**The Harvester**
```
```

## Sweep
The very first level of active information gathering. The goal is to identify devices by quick methods. 

**Ping Sweep**  
```
for i in ($IP_FILE_LIST)
do
   ping -c 1 $i | grep from | grep -v unreachable | cut -d " " -f 4 | cut -d ":" -f 1
done
```
**Nbtscan Sweep**  
```
nbtscan -f $IP_FILE_LIST
```

**TCP Sweep (FTP)**  
```
export TCPPORT=21  
nmap -n -iL $IP_FILE_LIST -p $TCPPORT -oG /tmp/nmapOut.txt > nul
cat /tmp/nmapOut.txt | grep Ports: | grep open | cut -d " " -f 2
```
**TCP Sweep (SSH)**  
```
export TCPPORT=22
nmap -n -iL $IP_FILE_LIST -p $TCPPORT -oG /tmp/nmapOut.txt > nul
cat /tmp/nmapOut.txt | grep Ports: | grep open | cut -d " " -f 2
```
**TCP Sweep (HTTP)**  
```
export TCPPORT=80
nmap -n -iL $IP_FILE_LIST -p $TCPPORT -oG /tmp/nmapOut.txt > nul
cat /tmp/nmapOut.txt | grep Ports: | grep open | cut -d " " -f 2
```
**TCP Sweep (HTTPS)**  
```
export TCPPORT=443
nmap -n -iL $IP_FILE_LIST -p $TCPPORT -oG /tmp/nmapOut.txt > nul
cat /tmp/nmapOut.txt | grep Ports: | grep open | cut -d " " -f 2
```
**UDP Sweep (DNS)**  
```
export UDPPORT=53
nmap -sU -n -iL $IP_FILE_LIST -p $UDPPORT -oG /tmp/udpPort.txt > nul
cat /tmp/udpPort.txt | grep open | grep -v filtered | cut -d " " -f 2
```
**UDP Sweep (SMNP)**  
```
export UDPPORT=161
nmap -sU -n -iL $IP_FILE_LIST -p $UDPPORT -oG /tmp/udpPort.txt > nul
cat /tmp/udpPort.txt | grep open | grep -v filtered | cut -d " " -f 2
```

**Reverse DNS recon**  
```
while read dns; do
   while read ip; do
      host $ip $dns | grep pointer
   done <$IP_FILE_LIST
done <$DNS_FILE_LIST
```

**DNS Zone Transfer recon**  
```
while read dns; do
   while read ip; do
      host -l $ip $dns | grep address
   done <$IP_FILE_LIST
done <$DNS_FILE_LIST'''
```
## Service Scan

**TCP Services**  
```
nmap -Pn -sV -sC -O --top-ports 5000 -n -scripts "discovery or version" $RHOST
```

## SQL Injection

Kali has a command-line tool that can interact with SQL databases. It is not installed by default.    
```
apt-get install sqsh freetds-bin freetds-common freetds-dev
```
For any database, make sure to update server info at  
```
/etc/freetds/freetds.conf
```
and authentication info at:
```
 ~/.sqshrc
 ```

