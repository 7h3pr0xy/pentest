# Penetration Testing
This is a general guidance of how to execute pen testing. It uses [Kali](Kalid.md) to execute commands.
All commands will use one of the exports.

## Kali exported variables
All commands here will refer to a series of pre-defined variables. Each
export CLASS_C_SUBNET=10.10.10
export IP_FILE_LIST=~/MyFolder/MyFile.txt
export DNS_FILE_LIST=~/MyFolder/KnownDNS.txt

# Goal and Rules of Engagement
This phase defines the goal of a penetration engagement, and what is allowed to be done.

# Info gathering
This phase tries to understand and scope the targets to be engaged.

## Passive info gathering
The goal is to identify targets by indirect means to minimize the chance of detection.

## Sweep
The very first level of active information gathering. The goal is to identify devices by quick methods. 

### Observe

**Ping Sweep**
'''
for i in ($IP_FILE_LIST)
do
   ping -c 1 $i | grep from | grep -v unreachable | cut -d " " -f 4 | cut -d ":" -f 1
done
'''
**Nbtscan Sweep**
'''
nbtscan -f $IP_FILE_LIST
'''

**TCP Sweep (FTP)**
'''
export TCPPORT=21
nmap -n -iL $IP_FILE_LIST -p $TCPPORT -oG /tmp/nmapOut.txt > nul
cat /tmp/nmapOut.txt | grep Ports: | grep open | cut -d " " -f 2
'''
**TCP Sweep (SSH)**
'''
export TCPPORT=22
nmap -n -iL $IP_FILE_LIST -p $TCPPORT -oG /tmp/nmapOut.txt > nul
cat /tmp/nmapOut.txt | grep Ports: | grep open | cut -d " " -f 2
'''
**TCP Sweep (HTTP)**
'''
export TCPPORT=80
nmap -n -iL $IP_FILE_LIST -p $TCPPORT -oG /tmp/nmapOut.txt > nul
cat /tmp/nmapOut.txt | grep Ports: | grep open | cut -d " " -f 2
'''
**TCP Sweep (HTTPS)**
'''
export TCPPORT=443
nmap -n -iL $IP_FILE_LIST -p $TCPPORT -oG /tmp/nmapOut.txt > nul
cat /tmp/nmapOut.txt | grep Ports: | grep open | cut -d " " -f 2
'''
**UDP Sweep (DNS)**
'''
export UDPPORT=53
nmap -sU -n -iL $IP_FILE_LIST -p $UDPPORT -oG /tmp/udpPort.txt > nul
cat /tmp/udpPort.txt | grep open | grep -v filtered | cut -d " " -f 2
'''
**UDP Sweep (SMNP)**
'''
export UDPPORT=161
nmap -sU -n -iL $IP_FILE_LIST -p $UDPPORT -oG /tmp/udpPort.txt > nul
cat /tmp/udpPort.txt | grep open | grep -v filtered | cut -d " " -f 2
'''

**Reverse DNS recon**
'''
while read dns; do
   while read ip; do
      host $ip $dns | grep pointer
   done <$IP_FILE_LIST
done <$DNS_FILE_LIST
'''


### Orient

