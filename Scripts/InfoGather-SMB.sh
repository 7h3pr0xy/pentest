#!/bin/bash

# Bail if no arguments
if [! -z $RHOST];  then
   echo "Please set RHOST to destination"
   exit 1
fi
if [! -z $OUTDIR]; then
   echo "Please set OUTDIR to output dir"
   exit 1
fi

clear
enum4linux -v -a $RHOST > $OUTDIR/$RHOST/$RHOST-SMB-Enum4Linux.txt
nmap -sU -sS --script=smb-enum-domains,smb-enum-groups,smb-enum-processes,smb-enum-services,smb-enum-sessions,smb-enum-users,smb-enum-shares,smb-os-discovery,smb-protocols,smb-server-stats,smb-system-info  -p U:137,T:139,T:445 $RHOST > $OUTDIR/$RHOST/$RHOST-SMB-NMAP.txt
echo All done.
