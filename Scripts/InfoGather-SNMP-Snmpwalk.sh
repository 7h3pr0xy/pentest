#!/bin/bash
if [ -z "$OUTDIR" ]; then
   echo "Please set OUTDIR to output dir"
   exit 1
fi

if [ -z "$RHOST" ]; then
   echo "Please set RHOST to target device"
   exit 1
fi

if [ -z "$COMMUNITY_LIST" ]; then
   echo "Please set COMMUNITY_LIST to target device"
   exit 1
fi

clear
echo Starting...
ipAddress=$RHOST
outFolder=$OUTDIR

while read community; do
    outFile="$OUTDIR/SNMP-Snmpwalk-V1-$community-$RHOST.txt"
    snmpwalk -v1 -c $community -O a $ipAddress > $outFile
done < $COMMUNITY_LIST
echo Done.

