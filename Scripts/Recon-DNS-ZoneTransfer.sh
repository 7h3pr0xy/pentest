#!/bin/bash
if [ -z "$IP_FILE_LIST" ];  then
   echo "Please set IP_FILE_LIST to full path of file with IP list"
   exit 1
fi

if [ -z "$OUTDIR" ]; then
   echo "Please set OUTDIR to output dir"
   exit 1
fi

if [ -z "$DNS_FILE_LIST" ]; then
   echo "Please set DNS_FILE_LIST full path of file with DNS server list"
   exit 1
fi

while read dns; do
   outfile=$OUTDIR/Recon_DNS_ZoneTransfer_$dns.txt
   rm $outfile -f
   while read ip; do
      host -l $ip $dns | grep address >> $outfile
   done <$IP_FILE_LIST
done <$DNS_FILE_LIST
