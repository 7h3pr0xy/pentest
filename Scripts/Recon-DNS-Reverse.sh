#!/bin/bash
# -- DNS Server query for a given domain

# Bail if no arguments
if [ $# -eq 0 ]; then
    echo "Usage: $0 [IPv4 address fragment] [DNS Server]"
    echo " i.e. $0 10.0.0 mydnsserver"
    exit 1
fi
rm /tmp/host.txt
for i in {1..254}
do
   host $1.$i $2 >> /tmp/host.txt
done
cat /tmp/host.txt | grep pointer | cut -d " " -f 1,5 | cut -d "." -f1 > /tmp/classC.txt
while IFS='' read -r line || [[ -n $line ]]; do
    echo $1.$line
done < /tmp/classC.txt

